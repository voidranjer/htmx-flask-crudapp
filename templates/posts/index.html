{% from 'posts/_macros.html' import render_comment %}

{% extends 'base.html' %}

{# 
{%block styles %}
  {{ super() }}
  <link rel="stylesheet" href="{{ static_url('css/posts.css') }}" />
{% endblock %}
#}

{% block title %}Posts{% endblock %}

{% block content %}
  <h1>Welcome to the Posts Page</h1>
  <p>This is where all posts are displayed.</p>

  <form hx-post="{{ url_for('posts') }}" class="children-mb-1" hx-target="next .card" hx-swap="beforebegin">
    <input type="text" name="title" placeholder="Title" class="form-control"/>
    <textarea name="content" placeholder="Content" class="form-control"></textarea>
    <input type="submit" value="New Post" class="btn btn-secondary" />
  </form>

  {% for post in db['posts'] %}
    <div hx-target="this" hx-swap="innerHTML">
      <div hx-trigger="load" hx-get="{{ url_for('show_post', id=post.id) }}"></div>
    </div>
  {% endfor %}
{% endblock %}
