{% extends 'base.html' %}

{% block title %}Posts{% endblock %}

{% block content %}
  <h1>Welcome to the Posts Page</h1>
  <p>This is where all posts are displayed.</p>

  <form hx-post="{{ url_for('edit_post') }}" class="children-mb-1" hx-target="#new-posts-insert" hx-swap="afterend" hx-on="resetForm: this.reset()">
    <div hx-target="this" hx-swap="outerHTML">
      <input type="text" name="title" placeholder="Title" class="form-control" autocomplete="off" hx-post="{{ url_for('validate_post_title') }}"/>
    </div>
    <textarea name="content" placeholder="Content" class="form-control"></textarea>
    <input type="submit" value="New Post" class="btn btn-secondary" />
  </form>

  <div id="new-posts-insert"></div>

  {% for post in db['posts'] %}
    <div hx-trigger="load" hx-target="this" hx-swap="outerHTML" hx-get="{{ url_for('show_post', id=post.id) }}"></div>
  {% endfor %}
{% endblock %}
