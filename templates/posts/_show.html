{# {% set post = db['posts'] | selectattr("id", "==", post_id|int) | list | first %} #}

{% from 'posts/_macros.html' import render_comment %}

<div class="card mt-5" hx-target="this" hx-swap="outerHTML">
  <div class="card-body">

    <div class="main-post-content">
      <h5 class="card-title">{{ post.title }}</h5>
      <p class="card-text">{{ post.content }}</p>
      <button class="btn btn-primary btn-sm" hx-target="closest .main-post-content" hx-get="{{ url_for('edit_post', id=post.id) }}">Edit Post</button>
      <hr />
    </div>

      <small class="text-muted">Comments</small>
      {% for comment_id in post.comments %} {{ render_comment(db,comment_id) }} {% endfor %}
  </div>
</div>